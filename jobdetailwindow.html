<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title></title>
    <script src="script.js?v=1.1.26" type="text/javascript"></script>
    <link href="loadingstyle.css" rel="stylesheet" type="text/css">
    <link href="otherstyle.css?v=1.1.15" rel="stylesheet" type="text/css">
  
</head>

<body>
    <div class="controlpanel">
        <div id="itemdetail" class="itemdetail"></div>
    </div>
</body>
<script>
    var serverdomain;
    var access;
    var currentwarehouse;
    window.addEventListener('message', function(event) {
        var itemdetail = event.data;
        window.title=itemdetail['joblabel'];
        serverdomain = itemdetail['serverdomain'];
        access = itemdetail['access'];
        currentwarehouse = itemdetail['currentwarehouse'];

        console.log(itemdetail);
        document.getElementById('itemdetail').innerHTML = itemdetail;
        loaddetailnew(itemdetail, itemdetail['activity'], null, false);
    });

    async function loaddetailnew(clickeditem,activity,thisjobdiv,newadded){
       

        detaillinenumber=0;

        
        var itemdetail = document.getElementById("itemdetail");
        
        itemdetail.innerHTML="";
        var detailform=document.createElement("form");
        detailform.id="detailform";
        detailform.className="detailform";
        itemdetail.appendChild(detailform);

        detailform.addEventListener("submit", function (event) {
            event.preventDefault();
            
        });

        
        
        //control   bar
        var controlbar=document.createElement("div");
        controlbar.className="controlbar";
        detailform.appendChild(controlbar);
        var submitbutton=document.createElement("button");
        submitbutton.innerHTML="保存";
        submitbutton.id="submitbutton";
        submitbutton.className="button";
        
        
        var cancelButton = document.createElement("button");
        cancelButton.innerHTML = "删除任务";
        cancelButton.className = "button";
        cancelButton.id = "archivebutton";
        
        
        var printbutton=document.createElement("button");
        printbutton.innerHTML="&#x1F5B6 操作单";
        printbutton.className="button";
        printbutton.style.marginLeft = '10px';

        
        var printcmrbutton=document.createElement("button");
        printcmrbutton.innerHTML="&#x1F5B6 CMR";
        printcmrbutton.className="button";

        var printlabelbutton=document.createElement("button");
        printlabelbutton.innerHTML="&#x1F5B6 标签";
        printlabelbutton.className="button";

        const invoicebutton = document.createElement('button');
        invoicebutton.innerHTML = '账单';
        invoicebutton.style.marginLeft = '10px';
        invoicebutton.className = 'button';

        controlbar.appendChild(submitbutton);
        controlbar.appendChild(cancelButton);
        controlbar.appendChild(printbutton);
        controlbar.appendChild(printcmrbutton);
        controlbar.appendChild(printlabelbutton);

        var titleLine = document.createElement("div");
        titleLine.className = "detailtitle";
        titleLine.innerHTML = activity+"任务";
        detailform.appendChild(titleLine);

        //customer line

        var linecontrol0=document.createElement("div");
        linecontrol0.className="input-container";
        var inputbottomline=document.createElement("div");
        inputbottomline.className="underline";
        var input0=document.createElement("input");
        input0.type="text";
        input0.name="customer";
        input0.id="customerinput";
        input0.required=true;
        var input0label=document.createElement("label");
        input0label.innerHTML="客户";
        input0label.htmlFor="customerinput";
        input0label.className="label";
        detailform.appendChild(linecontrol0);
        linecontrol0.appendChild(input0);
        linecontrol0.appendChild(inputbottomline);
        if(access==2){
            input0.value=customername;
            input0.readOnly = true;
        }else{
            input0.value=((clickeditem!='')?clickeditem['customer']:"");
            linecontrol0.appendChild(input0label);
        }
        
        var linecontrol0=document.createElement("div");
        linecontrol0.className="input-container";
        linecontrol0.style.width="180px";
        var inputbottomline=document.createElement("div");
        inputbottomline.className="underline";
        var input0=document.createElement("input");
        input0.type="text";
        input0.name="joblabel";
        input0.id="joblabelinput";
        input0.required=true;
        input0.value=((clickeditem!='')?clickeditem['joblabel']:"");
        var input0label=document.createElement("label");
        input0label.innerHTML=activity=="入库"?"箱号/单号":"目的地简称";
        input0label.htmlFor="joblabelinput";
        input0label.className="label";
        detailform.appendChild(linecontrol0);
        linecontrol0.appendChild(input0);
        linecontrol0.appendChild(input0label);
        linecontrol0.appendChild(inputbottomline);

        if(activity=="出库"){
            var linecontrol0=document.createElement("div");
            linecontrol0.className="input-container";
            linecontrol0.style.position="absolute";
            linecontrol0.style.left="300px";
            linecontrol0.style.top="57px";
            var inputbottomline=document.createElement("div");
            inputbottomline.className="underline";
            var input0=document.createElement("input");
            input0.type="text";
            input0.name="reference";
            input0.id="referenceinput";
            // input0.required=true;
            input0.value=((clickeditem!='')?clickeditem['reference']:"");
            var input0label=document.createElement("label");
            input0label.innerHTML="提货码";
            input0label.htmlFor="referenceinput";
            input0label.className="label";
            detailform.appendChild(linecontrol0);
            linecontrol0.appendChild(input0);
            linecontrol0.appendChild(input0label);
            linecontrol0.appendChild(inputbottomline);

            var linecontrol0=document.createElement("div");
            linecontrol0.className="input-container";
            linecontrol0.style.position="absolute";
            linecontrol0.style.left="300px";
            linecontrol0.style.top="95px";
            var inputbottomline=document.createElement("div");
            inputbottomline.className="underline";
            var input0=document.createElement("input");
            input0.type="text";
            input0.name="orderid";
            input0.id="orderidinput";
            // input0.required=true;
            input0.value=((clickeditem!='')?clickeditem['orderid']:"");
            var input0label=document.createElement("label");
            input0label.innerHTML="订单号";
            input0label.htmlFor="orderidinput";
            input0label.className="label";
            detailform.appendChild(linecontrol0);
            linecontrol0.appendChild(input0);
            linecontrol0.appendChild(input0label);
            linecontrol0.appendChild(inputbottomline);

        }
        
        if((newadded && access==2) || (access==2 && clickeditem!='' && clickeditem['status']=="未预约")){
            const statusinput=document.createElement("input");
            statusinput.type="hidden";
            statusinput.name="status";
            statusinput.value="未预约";
            detailform.appendChild(statusinput);
        }else{
            if(clickeditem['status'] && clickeditem['status']=="未预约"){
                clickeditem['status'] = "预报";
            }
            const taskstatusbar = createstatusbar(((clickeditem!='')?clickeditem['status']:"预报"),'预报','排队中','作业中','完成');
            taskstatusbar.style.position="absolute";
            taskstatusbar.style.left="200px";
            taskstatusbar.style.top="35px";
            detailform.appendChild(taskstatusbar);
        }

        var linecontrol0=document.createElement("div");
        linecontrol0.className="linecontrol";
        const dateinput=document.createElement("input");
        dateinput.type="datetime-local";
        dateinput.name="date";
        dateinput.id="inputdate";
        dateinput.className="lineinput";
        dateinput.required=true;
        dateinput.value=((clickeditem!='')?clickeditem['date']:new Date().toLocaleString('sv-SE', { timeZoneName: 'short' }).slice(0, 16));
        
        const dateinputlabel=document.createElement("label");
        dateinputlabel.innerHTML="日期";
        dateinputlabel.htmlFor="inputdate";
        dateinputlabel.className="lineinputlabel";
        detailform.appendChild(linecontrol0);
        linecontrol0.appendChild(dateinputlabel);
        linecontrol0.appendChild(dateinput);

        // dock appointment button

        const dockinfo = document.createElement('div');
        dockinfo.id = 'showdockinfo';
        dockinfo.style.display = 'inline-block';
        linecontrol0.appendChild(dockinfo);

        if(clickeditem['dock']){
            dockinfo.innerHTML = '已预约垛口: ' + clickeditem['dock'];
        }   
        
        //add warehouse selection and bulk status line
        const warehouseandbulkstatusline = document.createElement('div');
        warehouseandbulkstatusline.className = 'flexlinecontrol';
        warehouseandbulkstatusline.style.marginBottom = '5px';
        detailform.appendChild(warehouseandbulkstatusline);

        const selectedwarehouse=clickeditem['warehouse']?clickeditem['warehouse']:"";
        const warehouseselec=document.createElement('div');
        warehouseselec.innerHTML = '仓库:'+selectedwarehouse;
        warehouseandbulkstatusline.appendChild(warehouseselec);

        const bulkstatus=clickeditem['bulkstatus']?clickeditem['bulkstatus']:"";
        const bulkstatusdiv = document.createElement('div');
        bulkstatusdiv.innerHTML = '任务操作类型:'+bulkstatus;
        bulkstatusdiv.style.marginLeft = '20px';
        warehouseandbulkstatusline.appendChild(bulkstatusdiv);

        const line7control = document.createElement('div');
        line7control.className = 'flexlinecontrol';
        line7control.style.marginBottom = '5px';
        detailform.appendChild(line7control);

        if (activity == '出库') {
            
            var input0=document.createElement("textarea");
            input0.name="deladdress";
            input0.className="lineinput";
            input0.style.marginRight = '20px';
            input0.value=((clickeditem!='')?clickeditem['deladdress']:"");
            var input0label=document.createElement("label");
            input0label.innerHTML="送货地址";
            input0label.className="lineinputlabel";
            line7control.appendChild(input0label);
            line7control.appendChild(input0);
        }
        
        var input0=document.createElement("textarea");
        input0.name="ordernote";
        input0.className="lineinput";
        input0.value=((clickeditem!='')?clickeditem['ordernote']:"");
        var input0label=document.createElement("label");
        input0label.innerHTML="备注";
        input0label.className="lineinputlabel";
        input0label.style.margin="0px 0px 0px 0px";
        line7control.appendChild(input0label);
        line7control.appendChild(input0);

        var activityInput = document.createElement("input");
        activityInput.type = "hidden";
        activityInput.id = "jobactivity";
        activityInput.name = "activity";
        activityInput.value = clickeditem != '' ? clickeditem['activity'] : activity;
        detailform.appendChild(activityInput);

        var statuslog = document.createElement("div");
        statuslog.style.display = "none";
        statuslog.id = "statuslog";
        statuslog.innerHTML = clickeditem != '' ? clickeditem['status'] : "";
        detailform.appendChild(statuslog);

        var jobid = document.createElement("input");
        jobid.type = "hidden";
        jobid.name = "jobid";
        jobid.value = clickeditem['jobid'] ? clickeditem['jobid'] : new Date().getTime();
        detailform.appendChild(jobid);
        
        detailform.appendChild(document.createElement("hr"));

        //upload image block
        var uploaddiv=document.createElement("div");
        uploaddiv.className="uploaddiv";
        for (var i = 1; i <= 5; i++) {
            var uploadbuttonblock = document.createElement("div");
            uploadbuttonblock.className="uploadbuttonblock";
            uploadbuttonblock.id="uploadbuttonblock"+i;

            var uploadbutton = document.createElement("button");
            uploadbutton.className="container-btn-file";
            
            uploadbutton.innerHTML="上传图片"+i;

            var input = document.createElement("input");
            input.type = "file";
            input.id = "imgFile"+i;
            input.name = "imgFile"+i;
            input.className="file";
            input.accept = "image/*";
            input.multiple = false;
            
            uploadbutton.appendChild(input);
            uploadbuttonblock.appendChild(uploadbutton);

            const inumber = i;
            if (clickeditem != '' && clickeditem['img'+i] != '' && clickeditem['img'+i] != null) {
                var img = document.createElement("img");
                img.src = clickeditem['img'+i];
                img.width = 100;
                img.height = 100;
                img.className = "img-preview";
                uploadbuttonblock.appendChild(img);
                img.addEventListener("click", function() {
                    window.open(this.src);
                });
            }
            
            //!!!!!!!!!!!!!!
            input.addEventListener("change", function() {
                if (clickeditem == '') {
                    alert("请保存任务后再上传图片");
                } else {
                    var file = this.files[0];
                    if (file) {
                        if (file.size > 1048576) { // 1MB in bytes
                            var reader = new FileReader();
                            reader.readAsDataURL(file);
                            reader.onload = function(event) {
                                var img = new Image();
                                img.src = event.target.result;
                                img.onload = function() {
                                    var canvas = document.createElement("canvas");
                                    var ctx = canvas.getContext("2d");
                                    var width = img.width;
                                    var height = img.height;
            
                                    // Set canvas dimensions proportional to the image
                                    if (width > height) {
                                        if (width > 2000) {
                                            height *= 2000 / width;
                                            width = 2000;
                                        }
                                    } else {
                                        if (height > 2000) {
                                            width *= 2000 / height;
                                            height = 2000;
                                        }
                                    }
                                    canvas.width = width;
                                    canvas.height = height;
            
                                    // Draw the image on the canvas
                                    ctx.drawImage(img, 0, 0, width, height);
            
                                    // Get the compressed image data
                                    var compressedDataUrl = canvas.toDataURL("image/jpeg", 0.95); // Adjust quality as needed
            
                                    // Create an image element with the compressed data
                                    var compressedImg = document.createElement("img");
                                    compressedImg.src = compressedDataUrl;
                                    compressedImg.width = 100;
                                    compressedImg.height = 100;
                                    compressedImg.className = "img-preview";
                                    var existingImage = document.getElementById('uploadbuttonblock' + inumber).querySelector('.img-preview');
                                    if (existingImage) {
                                        existingImage.remove();
                                    }
                                    document.getElementById('uploadbuttonblock' + inumber).appendChild(compressedImg);
            
                                    // Convert data URL to Blob for upload
                                    var byteString = atob(compressedDataUrl.split(',')[1]);
                                    var mimeString = compressedDataUrl.split(',')[0].split(':')[1].split(';')[0];
                                    var ab = new ArrayBuffer(byteString.length);
                                    var ia = new Uint8Array(ab);
                                    for (var i = 0; i < byteString.length; i++) {
                                        ia[i] = byteString.charCodeAt(i);
                                    }
                                    var compressedFile = new Blob([ab], { type: mimeString });
            
                                    uploadimage(clickeditem['jobid'], compressedFile, 'img' + inumber);
                                };
                            };
                        } else {
                            var reader = new FileReader();
                            reader.readAsDataURL(file);
                            reader.onload = function() {
                                var img = document.createElement("img");
                                img.src = reader.result;
                                img.width = 100;
                                img.height = 100;
                                img.className = "img-preview";
                                var existingImage = document.getElementById('uploadbuttonblock' + inumber).querySelector('.img-preview');
                                if (existingImage) {
                                    existingImage.remove();
                                }
                                document.getElementById('uploadbuttonblock' + inumber).appendChild(img);
                            };
                            uploadimage(clickeditem['jobid'], file, 'img' + inumber);
                        }
                    }
                }
            });
            
            
            uploaddiv.appendChild(uploadbuttonblock);
        }
        itemdetail.appendChild(uploaddiv);
        itemdetail.appendChild(document.createElement("hr"));

        const sumcountdiv = document.createElement("div");
        sumcountdiv.className = "sumcount";
        sumcountdiv.id = "sumcount";
        itemdetail.appendChild(sumcountdiv);

        // Count all the pcs in the detaillineform
        var pcsCount = 0;
        var detaillineform = document.getElementById("detailform");
        var pcsInputs = detaillineform.querySelectorAll("input[name='pcs']");
        pcsInputs.forEach(function(input) {
            pcsCount += parseInt(input.value);
        });


        const detaillinelistDiv = document.createElement("div");
        detaillinelistDiv.id = "detaillinelist";
        detaillinelistDiv.className = "detaillinelist";
        itemdetail.appendChild(detaillinelistDiv);
        //load items
        if(clickeditem!=""){
            var items = clickeditem["items"];
            if(items!=null){
                for(var i=0;i<items.length;i++){
                    createdetaillinenew(i+1,items[i],activity,false);
                }
                detaillinenumber=detaillinenumber+items.length;
            }

        }
        

        
        //submit button    
        

        if ((clickeditem && clickeditem['status'] === '完成') || access<1) {
            var inputs = itemdetail.getElementsByTagName('input');
            var textareas = itemdetail.getElementsByTagName('textarea');
            var buttons = itemdetail.getElementsByTagName('button');
            var selections = itemdetail.getElementsByTagName('select');

            for (var i = 0; i < inputs.length; i++) {
                inputs[i].disabled = true;
            }

            for (var i = 0; i < textareas.length; i++) {
                textareas[i].disabled = true;
            }

            for (var i = 0; i < buttons.length; i++) {
                buttons[i].disabled = true;
            }

            for (var i = 0; i < selections.length; i++) {
                selections[i].disabled = true;
            }
        }
        if(access==2){
            printbutton.disabled = true;
            printcmrbutton.disabled = true;
            printlabelbutton.disabled = true;
            printcmrbutton.disabled = true;
            
            if (clickeditem['status'] && clickeditem['status'] != '未预约' && !newadded) {
                submitbutton.disabled = true;
                const tooltip = createTooltip("任务已确认预约，如需修改请联系管理员");
                submitbutton.insertAdjacentElement('afterend', tooltip);
                cancelButton.disabled = true;
            }
        }
        if(access==1 || access==3){
            cancelButton.removeAttribute("disabled");
            printbutton.removeAttribute("disabled");
            printcmrbutton.removeAttribute("disabled");
            printlabelbutton.removeAttribute("disabled");
            // invoicebutton.removeAttribute("disabled");
            var fileInputs = itemdetail.getElementsByClassName("file");
            for (var i = 0; i < fileInputs.length; i++) {
                fileInputs[i].removeAttribute("disabled");
            }
            var addvasbutton=itemdetail.getElementsByClassName("addvasbutton");
            if(addvasbutton){
                for (var i = 0; i < addvasbutton.length; i++) {
                    addvasbutton[i].removeAttribute("disabled");
                }
            }
        }
        
        // closebutton.removeAttribute("disabled");
        
        submitbutton.addEventListener("click", function() {
            // var inputform=document.getElementById("detailform");
            if(document.getElementById("inputdate").value==""){
                alert("请输入日期");
                return;
            }
            if(document.getElementById("statusvalue-4")){
                if(document.getElementById("statusvalue-4").checked==true){
                    if(document.getElementById("cannotcomplete")){
                        alert("有未完成附加服务，请先完成附加服务！");
                        return;
                    }
                }
            }
            
            const activeJobs = document.getElementById("activejobs");
            addnewjob(clickeditem,detaillinenumber).then(async function(){
                
                
                var searchnewadded = new FormData();
                searchnewadded.append("jobid",clickeditem['jobid']);

                const jobwithitems=await searchjobwithitems(searchnewadded);

                const newaddedjob = jobwithitems["jobs"][0];
                // const newaddeditems = jobwithitems["items"];
                const newaddeditems = newaddedjob["items"];
                
                const now=new Date().toLocaleString('sv-SE', { timeZoneName: 'short' }).slice(0, 16);
                //send email to customer
                if(newaddedjob['status']=="完成" && newaddedjob['activity']=="入库"){
                    const sendto=getemailaddress(newaddedjob['customer']);
                    if(sendto){
                        const mailsubject = "系统通知: "+newaddedjob['warehouse']+'仓库 '+newaddedjob['joblabel']+'入库完成';
                        const mailcontent = "主题任务入库完成，系统完成时间"+now+"。入库数据如下 \n"+newaddedjob['overview'].replace(/<br \/>/g, '\n')+ "\n 请登录系统查看详情";
                        sendemail(sendto,mailsubject,mailcontent);
                    }else{
                        //alert("无法发送邮件，请检查客户邮箱地址");
                    }
                }
                if(newaddedjob['status']=="完成" && newaddedjob['activity']=="出库"){
                    var outemails=[];
                    const showedorderid=newaddedjob['orderid']?'订单号（ISA）：'+newaddedjob['orderid']:"";
                    newaddeditems.forEach(function(item){
                        var index = outemails.findIndex(x => x['customer'] == item['customer']);
                        const pltinfo=item['plt']==0?"":item['plt']+"托";
                        if(index==-1){
                            outemails.push({"customer":item['customer'],
                                            "email":getemailaddress(item['customer']),
                                            "subject":"系统通知: "+newaddedjob['warehouse']+'仓库 '+item['label']+" "+showedorderid+' 出库完成',
                                            "bodycontent":item['container']+" "+item['label']+" "+item['pcs']+"件 "+pltinfo+"  "+item['note']+"\n"});
                        }else{
                            outemails[index]['bodycontent']+=item['container']+" "+item['label']+" "+item['pcs']+"件 "+pltinfo+"  "+item['note']+"\n";
                        }
                    });
                    outemails.forEach(function(email){
                        if(email['email']){
                            const emailbody = "主题任务入库完成，"+showedorderid+"。系统完成时间"+now+"。出库数据如下 \n"+email['bodycontent']+ "\n 请登录系统查看详情";
                            sendemail(email['email'],email['subject'],emailbody);
                        }
                    }
                    );
                }
                
                itemdetail.innerHTML="";
                document.getElementById('submitbutton').disabled = false;
                loaddetailnew(newaddedjob,activity,null,false);
                alert("任务保存成功");
                 
            })
            .catch(function(){
                alert("任务保存失败");
                document.getElementById('submitbutton').disabled = false; 
            });
            this.disabled = true;
            
        });
        printbutton.addEventListener("click", function() {
            // Displaying an alert message
            printSpecificContent(clickeditem);
        });
        printcmrbutton.addEventListener("click", function() {
            // Displaying an alert message
            printcmr(clickeditem,items);
        });
        printlabelbutton.addEventListener("click", function() {
            // Displaying an alert message
            printinventorylabel(items);
        });
        cancelButton.addEventListener("click", function() {
            if(clickeditem['status']=="完成"){
                alert("任务已完成，无法删除");
                return;
            }
            // Displaying an alert message
            if (confirm("确认删除任务?")) {
                // Code to execute if user confirms cancellation
                var archiveid = new FormData();
                archiveid.append("jobid",clickeditem['jobid']);
                archiveid.append("activity",activity);
                fetch(serverdomain+'archivejob', {
                    method: 'POST',
                    body: archiveid,
                }).then(response => response.json()).then(data => {
                    sysresponse.innerHTML=data["msg"];
                    if(data["error_code"]==0){
                        if(thisjobdiv){
                            thisjobdiv.remove();
                        }
                        itemdetail.innerHTML="";
                    }
                });

            } else {
                // Code to execute if user cancels cancellation
                // ...
            }
        });
        // invoicebutton.addEventListener("click", function() {
        //     showinvoicewindow(clickeditem,items);
        // });
        
        function checkreadytosubmit(){
            var readytosubmit=true;
            var detaillines = document.getElementsByClassName("detaillineform");
            for (var i = 0; i < detaillines.length; i++) {
                var detailline = detaillines[i];
                if (detailline.querySelector('select[name="plttype"]').value == "") {
                    alert("请填写完出货类型，散货或整托");
                    readytosubmit = false;
                    break;
                }
                if (detailline.querySelector('select[name="plttype"]').value != "") {
                    if (detailline.querySelector('select[name="plttype"]').value == "散货") {
                        continue;
                    }
                    // if (detailline.querySelector('input[name="plt"]').value == "") {
                    //     detailline.querySelector('input[name="plt"]').style.backgroundColor = "pink";
                    //     detailline.querySelector('input[name="plt"]').focus();
                    //     alert("请填写完预计打托数");
                    //     readytosubmit = false;
                    //     break;
                    // }
                    if (detailline.querySelector('select[name="oogplt"]').value == "") {
                        detailline.querySelector('select[name="oogplt"]').style.backgroundColor = "pink";
                        detailline.querySelector('select[name="oogplt"]').focus();
                        alert("请填写完是否可超尺寸");
                        readytosubmit = false;
                        break;
                    }
                }
            }
            return readytosubmit;
        }
        
    }
    function createdetaillinenew(nid, item, activity, cancelable) {
        
        var detailLines = document.getElementsByClassName("detaillineform");
        var id = detailLines.length + 1;
        while (document.getElementById("detaillineform" + id)) {
            id++;
        }
        // var detailform=document.getElementById("itemdetail");
        var detailform = document.getElementById("detaillinelist");

        const detaillineform=document.createElement("form");
        detaillineform.id="detaillineform"+id;
        detaillineform.className="detaillineform";
        detaillineform.style.opacity="0";
        detaillineform.style.height="0";

        detailform.appendChild(detaillineform);
        // detailform.appendChild(detaillineform);

        var createorder=document.createElement("input");
        createorder.name="createorder";
        createorder.className="createorder";
        createorder.style.border="none";
        createorder.style.width="20px";
        createorder.readOnly=true;
        createorder.value=detailLines.length;
        detaillineform.appendChild(createorder);
        
        
        
        var input1=document.createElement("input");
        input1.type="text";
        input1.name=activity=="入库"?"label":"container";
        input1.className="lineinput";
        input1.style.width="120px";
        input1.value=item==''?'':activity=="入库"?item['label']:item['container'];
        
        var input1label=document.createElement("label");
        input1label.innerHTML=activity=="入库"?"仓点":"箱号/单号";
        input1label.className="lineinputlabel";
        detaillineform.appendChild(input1label);
        detaillineform.appendChild(input1);

        input1.onblur=function(){
            // var location=getlocation(input1.value);
            // if(location!=null){
                
            //     input6.value=location[0];
            //     input7.value=location[1];
            // }
        };
        
        const pcsinput=document.createElement("input");
        pcsinput.type="text";
        pcsinput.name="pcs";
        pcsinput.className="lineinput";
        pcsinput.style.width="35px";
        pcsinput.value=item!=''?item['pcs']:'';
        const pcsinputlabel=document.createElement("label");
        pcsinputlabel.innerHTML="件数";
        pcsinputlabel.className="lineinputlabel";
        pcsinput.onblur=function(){
            sumpcsplt();
        };
        detaillineform.appendChild(pcsinputlabel);
        detaillineform.appendChild(pcsinput);


        const pltinput=document.createElement("input");
        pltinput.type="text";
        pltinput.name="plt";
        pltinput.className="lineinput";
        pltinput.style.width="35px";
        pltinput.value=item!=''?item['plt']:'';
        pltinput.onblur=function(){
            sumpcsplt();
        };
        const pltinputlabel=document.createElement("label");
        pltinputlabel.innerHTML="托数";
        pltinputlabel.className="lineinputlabel";
        detaillineform.appendChild(pltinputlabel);
        detaillineform.appendChild(pltinput);

        
        detaillineform.appendChild(document.createElement("br"));

        const pltreqlinecontrol = document.createElement("div");
        pltreqlinecontrol.style.display = "inline-flex";
        pltreqlinecontrol.className = "linecontrol";
        detaillineform.appendChild(pltreqlinecontrol);
        const pltrequirementtitle = document.createElement("div");
        pltrequirementtitle.innerHTML = "打托要求：";
        pltreqlinecontrol.appendChild(pltrequirementtitle);

        const plttypecon=item['plttype']?item['plttype']:"";
        const plttypeinput=createplttypeselectiondiv(plttypecon);
        plttypeinput.style.marginBottom = '5px';
        plttypeinput.style.display = 'inline-flex';
        pltreqlinecontrol.appendChild(plttypeinput);

        const oogplt = document.createElement("select");
        oogplt.name = "oogplt";
        oogplt.style.marginLeft = "10px";
        oogplt.placeholder = "是否可超尺寸";
        oogplt.className = "lineinput";
        oogplt.style.width = "100px";
        const oogpltoptions = ["", "不可超托盘尺寸", "可超托盘尺寸"];
        for (var i = 0; i < oogpltoptions.length; i++) {
            var option = document.createElement("option");
            option.value = oogpltoptions[i];
            option.text = oogpltoptions[i];
            if (item && item['oogplt'] == oogpltoptions[i]) {
                option.selected = true; // Set the default value based on item['oogplt']
            } else if (!item && oogpltoptions[i] == "散货") {
                option.selected = true; // Set the default value to "普通" if item is not defined
            }
            oogplt.appendChild(option);
        }
        pltreqlinecontrol.appendChild(oogplt);

        plttypeinput.querySelector('select').addEventListener("change", function() {
            if (this.value != "") {
                if(this.value=="散货"){
                    pltinput.value = 0;
                    oogplt.value = "";
                    return;
                }
                if(oogplt.value==""){
                    oogplt.value="不可超托盘尺寸";
                }
                if(!pltinput.value){
                    pltinput.focus();
                }
            }
        });

        var selectchannel=document.createElement("input");
        selectchannel.type="text";
        selectchannel.name="channel";
        selectchannel.setAttribute('list', 'channels');
        selectchannel.className="lineinput";
        selectchannel.style.width="90px";
        selectchannel.value=item['channel']?item['channel']:'';

        
        
        
        var input8=document.createElement("input");
        input8.type="text";
        input8.name="marks";
        input8.className="lineinput";
        input8.style.width="120px";
        input8.value=item!=''?item['marks']:'';
        var input8label=document.createElement("label");
        input8label.innerHTML="箱唛";
        input8label.className="lineinputlabel";
        detaillineform.appendChild(input8label);
        detaillineform.appendChild(input8);

        var input9=document.createElement("input");
        input9.type="text";
        input9.name="requirement";
        input9.className="lineinput";
        input9.style.width="160px";
        input9.value=item!=''?(item['requirement']?item['requirement']:''):'';
        var input9label=document.createElement("label");
        input9label.innerHTML="要求";
        input9label.className="lineinputlabel";
        detaillineform.appendChild(input9label);
        detaillineform.appendChild(input9);

        var input0label=document.createElement("label");
        input0label.innerHTML="渠道";
        input0label.style.marginLeft="10px";
        input0label.htmlFor="selectchannel";
        detaillineform.appendChild(input0label);
        detaillineform.appendChild(selectchannel);

        detaillineform.appendChild(document.createElement("br"));

        var input3=document.createElement("textarea");
        input3.name="fba";
        input3.className="lineinput";
        input3.value=item!=''?item['fba']:'';
        var input3label=document.createElement("label");
        input3label.innerHTML="FBA";
        input3label.className="lineinputlabel";
        detaillineform.appendChild(input3label);
        detaillineform.appendChild(input3);

        var input3=document.createElement("textarea");
        input3.name="note";
        input3.className="lineinput";
        input3.value=item!=''?item['note']:'';
        var input3label=document.createElement("label");
        input3label.innerHTML="仓库备注";
        input3label.className="lineinputlabel";
        detaillineform.appendChild(input3label);
        detaillineform.appendChild(input3);

        // var linecontrol=document.createElement("div");
        // linecontrol.className="linecontrol";
        // linecontrol.style.margin="0px";
        // var input12=document.createElement("input");
        // input12.name="kgs";
        // input12.type="text";
        // input12.id="kgs"+id;
        // input12.className="lineinput";
        // input12.style.width="80px";
        // input12.value=item['kgs']?item['kgs']:'';
        // var input12label=document.createElement("label");
        // input12label.innerHTML="重量(KG)/件:";
        // input12label.htmlFor=input12.id;
        // input12label.className="lineinputlabel";
        // input12label.htmlFor=input12;
        // linecontrol.appendChild(input12label);
        // linecontrol.appendChild(input12);

        // var input13=document.createElement("input");
        // input13.name="cbm";
        // input13.type="text";
        // input13.id="cbm"+id;
        // input13.className="lineinput";
        // input13.style.width="80px";
        // input13.value=item['cbm']?item['cbm']:'';
        // var input13label=document.createElement("label");
        // input13label.innerHTML="体积(CBM)/件:";
        // input13label.htmlFor=input13.id;
        // input13label.className="lineinputlabel";
        // input13label.htmlFor=input13;
        // linecontrol.appendChild(input13label);
        // linecontrol.appendChild(input13);

        // if(activity=="入库"){
        //     var priorityinput=document.createElement("select");
        //     priorityinput.name="priority";
        //     priorityinput.className="lineinput";
        //     priorityinput.style.width="45px";
        //     var priorityinputlabel=document.createElement("label");
        //     priorityinputlabel.innerHTML="优先级";
        //     priorityinputlabel.className="lineinputlabel";
        //     linecontrol.appendChild(priorityinputlabel);
        //     linecontrol.appendChild(priorityinput);
        //     const priorityoptions = [5, 4, 3, 2, 1, 0,-1,-2,-3,-4,-5,-6];
        //     for (var i = 0; i < priorityoptions.length; i++) {
        //         var option = document.createElement("option");
        //         option.value = priorityoptions[i];
        //         option.text = priorityoptions[i]==-6?"拦截":priorityoptions[i];
        //         if (item && item['priority'] == priorityoptions[i]) {
        //             option.selected = true; // Set the default value based on item['priority']
        //         } else if (!item && priorityoptions[i] == 0) {
        //             option.selected = true; // Set the default value to 5 if item is not defined
        //         }
        //         priorityinput.appendChild(option);
        //     }
        // }

        // detaillineform.appendChild(linecontrol);

        var input4 = document.createElement("input");
        input4.type = "hidden";
        input4.name = "id";
        input4.value = item != '' ? item['id'] : '';
        detaillineform.appendChild(input4);

        var input10 = document.createElement("input");
        input10.type = "hidden";
        input10.name = "createtime";
        var timeorder=(Math.floor(Date.now()/1000)%100000000)*10;
        input10.value =timeorder + id;
        detaillineform.appendChild(input10);

        var locationinput = document.createElement("input");
        locationinput.type = "hidden";
        locationinput.name = "inventoryloc";
        locationinput.value = item['inventoryloc'] ? item['inventoryloc'] : '';
        detaillineform.appendChild(locationinput);
        
        const linecontrol0=document.createElement("div");
        linecontrol0.className="linecontrol";
        linecontrol0.style.margin="0px";

        var input5 = document.createElement("input");
        input5.name = "inventoryid";
        input5.type = "hidden";
        input5.value = item != '' ? item['inventoryid'] : constructinventoryid(id);
        linecontrol0.appendChild(input5);

        const selectlocationbutton = document.createElement("button");
        selectlocationbutton.type = "button";
        selectlocationbutton.className = "button";
        selectlocationbutton.innerHTML = "选择库位";
        selectlocationbutton.style.fontSize = "14px";
        selectlocationbutton.style.padding = "5px 10px";
        selectlocationbutton.style.margin = "0px 10px";

        linecontrol0.appendChild(selectlocationbutton);
        selectlocationbutton.addEventListener("click", function() {
            // showinventorymap(searchedinventory,activity,[item],locationinput);
            showinventorymap(searchedinventory,activity,[item],function(selectedlocations){
                locationinput.value = selectedlocations;
            });
        });

        if (activity == '入库') {
            const addvasbutton = document.createElement("button");
            addvasbutton.type = "button";
            addvasbutton.className = "button";
            addvasbutton.classList.add("addvasbutton");
            addvasbutton.innerHTML = "添加额外任务";
            addvasbutton.style.fontSize = "14px";
            addvasbutton.style.padding = "5px 10px";
            addvasbutton.style.margin = "0px 10px";
            linecontrol0.appendChild(addvasbutton);
            addvasbutton.addEventListener("click", function() {
                var inputs = detaillineform.querySelectorAll('input');
                var vaspassdata = {};
                inputs.forEach(function(input) {
                    vaspassdata[input.name] = input.value;
                });
                vaspassdata['customer'] = document.getElementsByName("customer")[0].value;
                vaspassdata['container'] = document.getElementsByName("joblabel")[0].value;
                vaspassdata['jobid'] = document.getElementsByName("jobid")[0].value;
                addnewvaswindow(vaspassdata, function(vasitem) {
                    
                });
            });
        }

        if (activity == '出库') {
            var searchcreteria = new FormData();
            searchcreteria.append("inventoryid", item['inventoryid']);
            searchcreteria.append("status", '未完成');

            fetch(serverdomain+'searchvas', {
                method: 'POST',
                body: searchcreteria,
            }).then(response => response.json()).then(data => {
                if (data['data'] && pcsinput.value != 0) {
                    const cannotcomplete = document.createElement("div");
                    cannotcomplete.innerHTML = "该库存项目有未完成的附加任务!";
                    cannotcomplete.id = "cannotcomplete";
                    detaillineform.appendChild(cannotcomplete);
                    detaillineform.style.height = "175px";
                    detaillineform.style.backgroundColor = "rgba(255, 0, 0, 0.3)";
                }
            });
            
        }

        
        var input11 = document.createElement("input");
        input11.type = activity=="出库"? (item['customer']?"hidden":"text"):"hidden";
        input11.name = "customer";
        input11.className = "lineinput";
        input11.style.width="50px";
        input11.value = item['customer'] ? item['customer'] : '';
        var  input11label= document.createElement("label");
        input11label.innerHTML = "客户";
        input11label.className = "lineinputlabel";
        input11label.style.display=activity=="出库"? (item['customer']?"none":"inline-block"):"none";
        linecontrol0.appendChild(input11label);
        linecontrol0.appendChild(input11);

        detaillineform.appendChild(linecontrol0);

        const checkeddiv=createcheckbox("checked"+id,"checked",item['checked'],detaillineform);
        checkeddiv.style.position="absolute";
        checkeddiv.style.right="10px";
        checkeddiv.style.top="7px";
        detaillineform.appendChild(checkeddiv);

        

        //!!!!!!!!!
        if(cancelable){
            var deleteButton = document.createElement("button");
            deleteButton.type = "button";
            deleteButton.className = "button";
            deleteButton.innerHTML = "删除";
            deleteButton.style.fontSize = "14px";
            deleteButton.style.padding = "5px 5px";
            deleteButton.style.position = "absolute";
            deleteButton.style.right = "10px";
            deleteButton.style.bottom = "10px";
            deleteButton.addEventListener("click", function() {
                detaillineform.remove();
                const detailLines = document.getElementsByClassName("detaillineform");
                var index = 0;
                for(const detailLine of detailLines){
                    detailLine.getElementsByClassName("createorder")[0].value = detailLines.length - index;
                    index++;
                }
            });
            detaillineform.appendChild(deleteButton);
        }

        sumpcsplt();

        setTimeout(() => {
            detaillineform.style.opacity="1";
            detaillineform.style.height="160px";
        },1);
        


    }
</script>
<style type="text/css">
    [draggable=true] {
        cursor: move;
    }
    .bodyframe{
        display: flex;
        width: 100%;
    }
    .controlframe{
        display: inline-block;
        width: 800px;
        position: relative;
    }
    .leftbody{
        display: inline-block;
        /* width: calc(100vw - 560px); */
        width: 100vw;
        min-width: 220px;

        position: relative;
    }
    .searchbox{
        display: flex;
        flex-wrap: wrap;
        width: calc(100vw - 560px);

        min-width: 220px;
        margin: 0px 0px 0px 0px;
        position: relative;
    }
    .activejobs{
        position: relative;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        align-items: flex-start;
        width: 100%;
        min-width: 220px;
        height: calc(100vh - 145px);
        overflow: auto;
    }
    .activejob{
        border-width: 1px;
        border-style: solid;
        border-color: light-grey;
        border-radius: 2px;
        margin:6px 6px 6px 6px;
        padding-left:5px;
        padding-right:5px;
        width: 200px;
        min-width: 180;
        height: 300px;
        font-size: 16px;
        display: inline-block;
        box-shadow:  0px 5px 15px rgba(0,0,0,0.25);
        transition:0.5s;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }
    
    .activejob:hover{
        box-shadow:  0px 5px 15px 8px rgba(0,0,0,0.25);
        transition: 0.6s;
    }
    .listitem{
        margin: 0 0 0 0;
        display: inline;
        font-size: 16px;
    }
    .itemtitle{
        font-size: 18px;
        font-weight: bold;
        display:block;
        margin: 0 0 0 0;
    }
    .itemline{
        display: inline-block;
        width: 100%;
    }
    .lineinputlabel{
        display: inline-block;
        margin: 0 0 5 0;
    }
    .jobstatus{
        display: inline-block;
        position: absolute;
        right: 33;
        top: 2;
    }

    .controlpanel{
        display: flex;
        margin: 0 0 0 5px;
        position: relative;
        width:100%;
    }
    .detailtitle{
        font-size: 18px;
        font-weight: bold;
        display:block;
        margin: 0 0 0 0;
    }
    .itemdetail{
        position: relative;
        display: inline-block;
        width: 90%;
    }
    .statusbox{
        position: absolute;
        right: 0;
        top: 0;
    }

    .controlbar{

        display: flex;
        width: 100%;
        
        
    }
    .linecontrol{
        display: block;
        width: 100%;
        margin: 5 5 5 5;
    }
    .flexlinecontrol{
        display: flex;
        flex-wrap: wrap;
        margin: 0;
        position: relative;
    }
    .detailform{
        display: block;
        width: 500px;
    }
    .detaillineform{
        display: block;
        margin:0 0 0 0;
        margin-block-end: 0;

        border-width: 1px;
        border-style: solid;
        border-color: rgba(176, 176, 176, 0.25);
        border-radius: 2px;
        margin:2px 2px 2px 2px;
        padding: 5px 5px 5px 5px;
        width: 500px;
        min-width: 220px;
        display: inline-block;
        box-shadow:  0px 2px 5px rgba(0,0,0,0.25);
        transition:0.5s;
        position: relative;
    }
    .detailpargraph{
        width: 400px;
        overflow-wrap: break-word;
    }
    .button {
        font-family: inherit;
        border: none;
        /* outline: 1px dotted rgb(37, 37, 37);
        outline-offset: -4px; */
        background: hsl(0deg 0% 75%);
        box-shadow: inset -1px -1px #292929, inset 1px 1px #fff, inset -2px -2px rgb(158, 158, 158), inset 2px 2px #ffffff;
        font-size: 14px;
        text-transform: uppercase;
        letter-spacing: 2px;
        padding: 5px 8px;
        transition: 0.2s;
    }

    .button:active {
        box-shadow: inset 1px 1px #fff, inset 1px 1px #292929, inset -2px -2px #ffffff, inset 2px 2px rgb(158, 158, 158);
        background: hsl(0, 0%, 88%);
    }
    .input-container {
        position: relative;
        margin: 15px 0 0 0;
        width: 100px;
    }

    .input-container input[type="text"] {
        font-size: 16px;
        width: 100%;
        border: none;
        border-bottom: 2px solid #ccc;
        padding: 2px 0 0 0;
        background-color: transparent;
        outline: none;
    }

    .input-container .label {
        position: absolute;
        top: 0;
        left: 0;
        color: #524f4f;
        transition: all 0.3s ease;
        pointer-events: none;
    }

    /* .input-container input[type="text"]:focus ~ .label,  */
    .input-container input[type="text"]:valid ~ .label,
    .input-container input[type="text"]:disabled ~ .label
    {
        top: -15px;
        font-size: 12px;
        color: #777676;
    }

    .input-container .underline {
        position: absolute;
        bottom: 0;
        left: 0;
        height: 2px;
        width: 100%;
        background-color: #333;
        transform: scaleX(0);
        transition: all 0.3s ease;
    }

    .input-container input[type="text"]:focus ~ .underline {
        transform: scaleX(1);
    }

    .inventory-table-header {
        
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid #dddddd;
        cursor: pointer;
        position: sticky; /* Make the header sticky */
        top: 0; /* Stick to the top of the container */
        background-color: white; /* Ensure the header has a background color */
        z-index: 1;
    }
    
    .inventory-table-row {
       
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        background: rgb(255, 255, 255);
        border-bottom: 1px solid #ffffff;
        cursor: pointer;
    }
    .inventory-table-row:nth-child(even) {
        background: rgb(240, 240, 240);
    }
    .inventory-table-row:hover {
        background: rgb(204, 206, 204);
        opacity: 1;
        transition: 0.5s;
   }
   .inventory-table-complex-row {
       border-bottom: 1px solid black;
       justify-content: space-between;
       align-items: center;
       padding: 10px 0;
       background: rgb(255, 255, 255);
       cursor: pointer;
   }
   .inventory-table-complex-row:hover {
       background: rgb(204, 206, 204);
       opacity: 1;
       transition: 0.5s;
  }
    .unittable-table{
        background-color: white;
    }
    /* .unittable-table:nth-child(even) {
        background: rgb(240, 240, 240);
    } */
    .unittable-table:hover {
        background: rgb(204, 206, 204);
        opacity: 1;
        transition: 0.5s;
   }
   .tablerownoncompleted{
        color:grey;
        opacity: 0.5;
    }
    table{
        width: 100%;
        border-collapse: collapse;
        text-align: center;
    }

    .container-btn-file {
        /* display: flex;
        position: relative;
        justify-content: center;
        align-items: center;
        background-color: #666666;
        color: #fff;
        border-style: none;
        padding: 4px 4px;
        border-radius: 2px;
        overflow: hidden;
        z-index: 1;
        box-shadow: 4px 8px 10px -3px rgba(0, 0, 0, 0.356);
        transition: all 250ms;
        cursor: pointer; */

        font-family: inherit;
        border: none;
        background: hsl(0deg 0% 75%);
        box-shadow: inset -1px -1px #292929, inset 1px 1px #fff, inset -2px -2px rgb(158, 158, 158), inset 2px 2px #ffffff;
        font-size: 12px;
        letter-spacing: 0;
        padding: 3px 3px;
        transition: 0.2s;
        position: relative;
        justify-content: center;
        align-items: center;
        display: flex;
    }
    .container-btn-file input[type="file"] {
        position: absolute;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: pointer;
    }
    .container-btn-file > svg {
        margin-right: 1em;
    }
    .container-btn-file:active {
        box-shadow: inset 1px 1px #fff, inset 1px 1px #292929, inset -2px -2px #ffffff, inset 2px 2px rgb(158, 158, 158);
        background: hsl(0, 0%, 88%);
    }
    .button input[type="file"] {
        position: absolute;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: pointer;
    }
    
    
    .uploaddiv{
        display: flex;
        justify-content: start;
        align-items: center;
        margin: 10px 0;
        height: 125px;
    }
    .uploadbuttonblock{
        display: block;
        justify-content: center;
        align-items: center;
        width: 100px;
    }

    .loginblock{
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
    }

    .login-form {
        --input-focus: #2d8cf0;
        --font-color: #323232;
        --font-color-sub: #666;
        --bg-color: #fff;
        --main-color: #323232;
        padding: 20px;
        background: lightgrey;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
        gap: 20px;
        border-radius: 5px;
        border: 2px solid var(--main-color);
        box-shadow: 4px 4px var(--main-color);
    }

    .login-title {
        color: var(--font-color);
        font-weight: 900;
        font-size: 20px;
        margin-bottom: 25px;
    }

    .login-title span {
        color: var(--font-color-sub);
        font-weight: 600;
        font-size: 17px;
    }

    .login-input {
        width: 150px;
        height: 40px;
        border-radius: 5px;
        border: 2px solid var(--main-color);
        background-color: var(--bg-color);
        box-shadow: 4px 4px var(--main-color);
        font-size: 15px;
        font-weight: 600;
        color: var(--font-color);
        padding: 5px 10px;
        outline: none;
    }

    .login-input::placeholder {
        color: var(--font-color-sub);
        opacity: 0.8;
    }

    .login-input:focus {
        border: 2px solid var(--input-focus);
    }


    .login-button-confirm {
        margin: 50px auto 0 auto;
        width: 120px;
        height: 40px;
        border-radius: 5px;
        border: 2px solid var(--main-color);
        background-color: var(--bg-color);
        box-shadow: 4px 4px var(--main-color);
        font-size: 17px;
        font-weight: 600;
        color: var(--font-color);
        cursor: pointer;
    }
    .login-button-confirm:active {
        box-shadow: 0px 0px var(--main-color);
        transform: translate(3px, 3px);
    }
    .tooltip-container {
        position: relative;
        display: inline-block;
        margin:0;
        /* margin: 5px 5px 10px 10px; */
    }

    .tooltip-text {
        color: #333;
        font-size: 18px;
        cursor: pointer;
    }

    .tooltip {
        position: absolute;
        width: 200px;
        top: 100%;
        left: 50%;
        font-size: 14px;
        transform: translateX(-50%);
        opacity: 0;
        visibility: hidden;
        background: #0b798a;
        color: #000000;
        padding: 10px;
        border-radius: 4px;
        transition: opacity 0.3s, visibility 0.3s, top 0.3s, background 0.3s;
        z-index: 1;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .tooltip::before {
        content: "";
        position: absolute;
        bottom: 100%;
        left: 50%;
        border-width: 8px;
        border-style: solid;
        border-color: transparent transparent #0b798a transparent;
        transform: translateX(-50%);
    }

    .tooltip-container:hover .tooltip {
        top: 120%;
        opacity: 1;
        visibility: visible;
        background: #abeaf0;
        transform: translate(-50%, -5px);
    }
    .sumcount{
        display: inline-block;
        margin: 0px 0px 0px 20px;
    }
    .fade-in {
        animation: fadeIn 0.8s ease-in-out;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    /* input[list]::-webkit-calendar-picker-indicator {
        display: none;
    }
    datalist {
        display: block !important;
    } */

    .tableele{
        position: relative;
    }
    .tableele:hover .tooltip {
        top: 120%;
        opacity: 1;
        visibility: visible;
        background: rgb(73 162 233);
        transform: translate(-50%, -5px);
        z-index: 2;
    }
    .inventoryreporttablediv{
        display: flex;

        flex-direction: column;
        width: 50%;
        min-width: 220px;
        max-width: 500px;
        justify-content: center;
        align-items: center;
        margin: 0px 0px 0px 0px;
    }
    .draggable {
        cursor: move;
    }
    .dragging {
        opacity: 0.5;
    }

    .itemblock {
    display: flex;
    flex-direction: column;
    width: fit-content;
    position: static;
    width: 600px;
    max-width: 600px;
    }

    .itemblock .blocktitle {
    font-size: 18px;
    color: #176dee;
    font-weight: 700;
    position: relative;
    top: 0.5rem;
    margin: 0 0 0 7px;
    padding: 0 3px;
    background: #ffffff;
    width: fit-content;
    }

    .itemblock .blockcontent {
    padding: 8px 8px;
    font-size: 0.75rem;
    border: 2px #176dee solid;
    border-radius: 4px;
    box-shadow:  0px 2px 5px rgba(0,0,0,0.5);
    transition: 0.5s;
    display: flex;

    flex-wrap: wrap;
    /* background: #e8e8e8; */
    }

    .selectiondiv {
        display: flex;
    }

    .openinnewwindowicon {
        width: 22px;
        height: 22px;
        position: absolute;
        top:2px;
        right: 2px;
        z-index: 5;
    }
</style>
</html>
